From 11d0b1eaaa30a36ba8b1740f61156dcb5f28d652 Mon Sep 17 00:00:00 2001
From: Mike Kruskal <mkruskal@google.com>
Date: Thu, 3 Feb 2022 16:38:44 -0800
Subject: [PATCH] Remove dependency on RepeatedField::iterator being
 implemented as a pointer

PiperOrigin-RevId: 426267884
Change-Id: Ia846483b753fe4060a6d3483d85d5dd047783099
---
 tensorflow/compiler/mlir/tensorflow/utils/translate_utils.cc | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/tensorflow/compiler/mlir/tensorflow/utils/translate_utils.cc b/tensorflow/compiler/mlir/tensorflow/utils/translate_utils.cc
index 075d33a348cb3..f1a301342a77c 100644
--- a/tensorflow/compiler/mlir/tensorflow/utils/translate_utils.cc
+++ b/tensorflow/compiler/mlir/tensorflow/utils/translate_utils.cc
@@ -29,7 +29,8 @@ void PopulateTfVersions(mlir::ModuleOp module, const VersionDef& versions) {
   auto bad_consumers = b.getNamedAttr(
       "bad_consumers",
       b.getI32ArrayAttr(llvm::ArrayRef<int32_t>(
-          versions.bad_consumers().begin(), versions.bad_consumers().end())));
+          versions.bad_consumers().data(),
+          versions.bad_consumers().data() + versions.bad_consumers().size())));
   module->setAttr("tf.versions",
                   b.getDictionaryAttr(llvm::ArrayRef<mlir::NamedAttribute>(
                       {producer, min_consumer, bad_consumers})));
