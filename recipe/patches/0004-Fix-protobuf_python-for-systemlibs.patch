From 78fe26cde07460b7e2ebfe2b017398986ea8f10a Mon Sep 17 00:00:00 2001
From: "Uwe L. Korn" <uwe.korn@quantco.com>
Date: Wed, 30 Aug 2023 16:58:41 +0200
Subject: [PATCH 04/41] Fix protobuf_python for systemlibs

---
 tensorflow/workspace2.bzl                  | 1 +
 third_party/systemlibs/protobuf_python.bzl | 5 +++++
 2 files changed, 6 insertions(+)
 create mode 100644 third_party/systemlibs/protobuf_python.bzl

diff --git a/tensorflow/workspace2.bzl b/tensorflow/workspace2.bzl
index 5d75ffd4a6d..fe87aac9a8c 100644
--- a/tensorflow/workspace2.bzl
+++ b/tensorflow/workspace2.bzl
@@ -401,6 +401,7 @@ def _tf_repositories():
         system_link_files = {
             "//third_party/systemlibs:protobuf.bzl": "protobuf.bzl",
             "//third_party/systemlibs:protobuf_deps.bzl": "protobuf_deps.bzl",
+            "//third_party/systemlibs:protobuf_python.bzl": "python/BUILD",
         },
         urls = tf_mirror_urls("https://github.com/protocolbuffers/protobuf/archive/v3.21.9.zip"),
     )
diff --git a/third_party/systemlibs/protobuf_python.bzl b/third_party/systemlibs/protobuf_python.bzl
new file mode 100644
index 00000000000..982617a765c
--- /dev/null
+++ b/third_party/systemlibs/protobuf_python.bzl
@@ -0,0 +1,5 @@
+cc_library(
+    name = "proto_api",
+   #  hdrs = ["google/protobuf/proto_api.h"],
+    visibility = ["//visibility:public"],
+)
