--- third_party/llvm/workspace.bzl	2025-04-17 15:16:37.539588592 +0000
+++ third_party/llvm/workspace.bzl	2025-04-17 15:17:14.799548942 +0000
@@ -23,6 +23,7 @@
             "//third_party/llvm:toolchains.patch",
             "//third_party/llvm:zstd.patch",
             "//third_party/llvm:rocdl_shuffle_down.patch",
+            "//third_party/llvm:dirty.patch",
         ],
         link_files = {"//third_party/llvm:run_lit.sh": "mlir/run_lit.sh"},
     )
--- /dev/null	2025-04-17 14:29:17.993999811 +0000
+++ third_party/llvm/dirty.patch	2025-04-17 16:14:55.340857915 +0000
@@ -0,0 +1,11 @@
+--- a/utils/bazel/llvm-project-overlay/llvm/config.bzl	2025-04-17 16:11:50.417140143 +0000
++++ b/utils/bazel/llvm-project-overlay/llvm/config.bzl	2025-04-17 16:11:54.891132310 +0000
+@@ -103,7 +103,7 @@
+     "@bazel_tools//src/conditions:linux_aarch64": native_arch_defines("AArch64", "aarch64-unknown-linux-gnu"),
+     "@bazel_tools//src/conditions:linux_ppc64le": native_arch_defines("PowerPC", "powerpc64le-unknown-linux-gnu"),
+     "@bazel_tools//src/conditions:linux_s390x": native_arch_defines("SystemZ", "systemz-unknown-linux_gnu"),
+-    "//conditions:default": native_arch_defines("X86", "x86_64-unknown-linux-gnu"),
++    "//conditions:default": native_arch_defines("AArch64", "aarch64-unknown-linux-gnu"),
+ }) + [
+     "LLVM_VERSION_MAJOR={}".format(LLVM_VERSION_MAJOR),
+     "LLVM_VERSION_MINOR={}".format(LLVM_VERSION_MINOR),
